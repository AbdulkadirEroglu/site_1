{% extends "admin/base.html" %}

{% block layout %}
<div class="admin-shell">
    {% include "admin/partials/sidebar.html" %}
    <main class="admin-content">
        <header class="admin-header">
            <h1>{{ form_title }}</h1>
            <a class="btn ghost" href="/admin/categories">Back to list</a>
        </header>
        <section class="panel">
            <header>
                <div>
                    <h2>Category metadata</h2>
                    <p class="panel-subtitle">Define the label customers will see and the slug used in URLs.</p>
                </div>
            </header>
            <form class="admin-form" method="post" action="{{ form_action }}">
                <input type="hidden" name="csrf_token" value="{{ csrf_token }}" />
                {% if form_error %}
                <div class="form-error" role="alert">{{ form_error }}</div>
                {% endif %}
                <label>
                    Name
                    <input name="name" type="text" required value="{{ form_data.name }}" />
                </label>
                {% if form_mode == "edit" %}
                <label>
                    Parent category
                    <input type="hidden" name="parent_id" value="{{ form_data.parent_id }}" />
                    <input type="text" value="{{ parent_display }}" readonly />
                </label>
                {% else %}
                <label>
                    Parent category
                    <select name="parent_id">
                        <option value="">No parent (top-level)</option>
                        {% for option in parent_options %}
                        <option value="{{ option.id_str }}" {% if form_data.parent_id == option.id_str %}selected{% endif %}>{{ option.label }}</option>
                        {% endfor %}
                    </select>
                </label>
                {% endif %}
                <label>
                    Level
                    <input name="level" type="number" value="{{ form_data.level }}" readonly />
                </label>
                <label>
                    Order
                    <input name="order" type="number" min="0" value="{{ form_data.order }}" />
                </label>
                <label>
                    Slug <span class="field-note">(optional)</span>
                    <input name="slug" type="text" placeholder="auto-generated-when-empty" value="{{ form_data.slug }}" />
                </label>
                <label>
                    Description <span class="field-note">(optional)</span>
                    <textarea name="description" rows="4" placeholder="Internal description or merchandising notes.">{{ form_data.description }}</textarea>
                </label>
                <div class="form-actions">
                    <button class="btn ghost" type="reset">Reset</button>
                    <button class="btn primary" type="submit">{{ submit_label }}</button>
                </div>
            </form>
        </section>
    </main>
</div>
{% endblock %}
